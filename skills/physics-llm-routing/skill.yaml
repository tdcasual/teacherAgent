id: physics-llm-routing
schema_version: 2
title: 模型路由管理
desc: 配置多渠道多模型路由，并按任务类型分配模型
allowed_roles: [teacher]
routing:
  intents: [routing]
  keywords:
    - 模型路由
    - 路由配置
    - 路由仿真
    - 路由回滚
    - teacher.llm_routing
    - fallback channel
  keyword_weights:
    模型路由: 7
    路由回滚: 7
    teacher.llm_routing: 8
  min_score: 3
  min_margin: 1
  confidence_floor: 0.28
  match_mode: substring
agent:
  prompt_modules:
    - teacher/skills/llm_routing.md
  tools:
    allow:
      - teacher.llm_routing.get
      - teacher.llm_routing.simulate
      - teacher.llm_routing.propose
      - teacher.llm_routing.apply
      - teacher.llm_routing.rollback
      - chart.agent.run
      - chart.exec
  budgets:
    max_tool_rounds: 4
    max_tool_calls: 8
  model_policy:
    enabled: true
    default:
      provider: openai
      mode: openai-chat
      model: gpt-4.1-mini
      temperature: 0.2
    routes:
      - id: routing_simulation
        priority: 200
        match:
          kinds: [chat.agent]
          needs_tools: true
        target:
          provider: openai
          mode: openai-chat
          model: gpt-4.1-mini
          temperature: 0.2
          max_tokens: 3072
      - id: routing_summary
        priority: 160
        match:
          kinds: [chat.agent_no_tools]
          needs_tools: false
        target:
          provider: openai
          mode: openai-chat
          model: gpt-4.1-mini
          temperature: 0.2
ui:
  prompts:
    - 先读取当前路由配置，再给我一个“教师对话/作业解析/考试分析”三类任务的分流方案。
  examples:
    - 查看当前模型路由
    - 仿真 physics-homework-generator 的 chat.agent
    - 提交新路由方案并等待我确认
    - 回滚到路由版本 3
